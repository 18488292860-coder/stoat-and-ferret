{
  "version": "v007",
  "description": "Effect Workshop GUI — Complete remaining effect types (audio mixing, transitions), build the effect registry with JSON schema validation and registry-based dispatch, and construct the full GUI effect workshop with catalog UI, parameter forms, and live preview. Covers milestones M2.4-2.6, M2.8-2.9.",
  "backlog_ids": ["BL-044", "BL-045", "BL-046", "BL-047", "BL-048", "BL-049", "BL-050", "BL-051", "BL-052"],
  "context": {
    "rationale": "v007 builds on v006's effects engine foundation to deliver the complete effect workshop: new Rust filter builders for audio and transitions, a refactored effect registry with builder-protocol dispatch and JSON schema validation, and the full GUI for discovering, configuring, previewing, and managing effects on clips.",
    "constraints": [
      "v006 effects engine must be complete (provides filter expression engine, graph validation, text overlay, speed control, EffectRegistry)",
      "v005 GUI shell must be complete (provides React/TypeScript/Vite, Zustand stores, WebSocket, component patterns)",
      "Non-destructive editing: never modify source files",
      "Rust for compute, Python for orchestration",
      "Transparency: API responses include generated FFmpeg filter strings",
      "SPA fallback routing still deferred (LRN-023)"
    ],
    "assumptions": [
      "Rust builder pattern from v006 (LRN-028) extends to audio and transition domains without modification",
      "Two-input filter pattern (xfade, acrossfade) works via existing FilterChain.input() API",
      "Custom form generator handles 5-6 parameter types without RJSF dependency",
      "Array-index-based effect CRUD is sufficient for single-user v007 scope",
      "Pre-existing mypy errors (11) do not block new code"
    ],
    "deferred_items": [
      "Preview thumbnails (server-side FFmpeg rendering) — filter string preview used instead",
      "SPA fallback routing for deep links",
      "UUID-based effect IDs (array index used for v007)",
      "RJSF migration (custom form generator used for v007)"
    ]
  },
  "themes": [
    {
      "number": 1,
      "slug": "rust-filter-builders",
      "goal": "Implement Rust filter builders for audio mixing and video transitions, extending the proven v006 builder pattern to two new effect domains.",
      "features": [
        {"number": 1, "slug": "audio-mixing-builders", "goal": "Build AmixBuilder, VolumeBuilder, AfadeBuilder, and DuckingPattern in Rust with PyO3 bindings"},
        {"number": 2, "slug": "transition-filter-builders", "goal": "Build FadeBuilder, XfadeBuilder with TransitionType enum and AcrossfadeBuilder in Rust with PyO3 bindings"}
      ]
    },
    {
      "number": 2,
      "slug": "effect-registry-api",
      "goal": "Refactor the effect registry to use builder-protocol dispatch, add JSON schema validation, create the transition API endpoint, and document architectural changes.",
      "features": [
        {"number": 1, "slug": "effect-registry-refactor", "goal": "Add build_fn to EffectDefinition, replace _build_filter_string() dispatch with registry lookup, add JSON schema validation and Prometheus metrics"},
        {"number": 2, "slug": "transition-api-endpoint", "goal": "Create POST /effects/transition endpoint with clip adjacency validation and persistent storage"},
        {"number": 3, "slug": "architecture-documentation", "goal": "Update docs/design/02-architecture.md and 05-api-specification.md to reflect registry refactoring, new endpoints, and effect type additions"}
      ]
    },
    {
      "number": 3,
      "slug": "effect-workshop-gui",
      "goal": "Build the complete Effect Workshop GUI: catalog, schema-driven forms, live preview, and full builder workflow.",
      "features": [
        {"number": 1, "slug": "effect-catalog-ui", "goal": "Build grid/list view of available effects with search, filter, and AI hint tooltips"},
        {"number": 2, "slug": "dynamic-parameter-forms", "goal": "Build schema-driven form generator supporting number/range, string, enum, boolean, and color picker inputs with validation"},
        {"number": 3, "slug": "live-filter-preview", "goal": "Build debounced filter string preview panel with syntax highlighting and copy-to-clipboard"},
        {"number": 4, "slug": "effect-builder-workflow", "goal": "Compose catalog, form, and preview into full workflow with clip selector, effect stack visualization, and effect CRUD (edit/remove)"}
      ]
    },
    {
      "number": 4,
      "slug": "quality-validation",
      "goal": "Validate the complete effect workshop through E2E testing with accessibility compliance and update API specification documentation.",
      "features": [
        {"number": 1, "slug": "e2e-effect-workshop-tests", "goal": "E2E tests covering catalog browse, parameter config, preview, apply/edit/remove effects, and WCAG AA accessibility"},
        {"number": 2, "slug": "api-specification-update", "goal": "Update OpenAPI spec and docs/design/05-api-specification.md with transition, preview, and CRUD endpoints"}
      ]
    }
  ]
}
